@{
    Layout = "/Areas/MShop/Themes/M1/Views/Shared/_BaseLayout.cshtml";
    Maticsoft.Model.Shop.PromoteSales.GroupBuy WeiXinGroupBuyinfo = ViewBag.ActiveModel as Maticsoft.Model.Shop.PromoteSales.GroupBuy;
    decimal price = (ViewBag.ActiveType != 0 && WeiXinGroupBuyinfo.Price != 0) ? WeiXinGroupBuyinfo.Price : Model.ProductSkus[0].SalePrice;

    Maticsoft.Model.Shop.PromoteSales.GroupBuy GroupBuyInfo = ViewBag.ActiveModel;
}
@using Maticsoft.Model.Shop.Products
@model Maticsoft.ViewModel.Shop.ProductModel
<script type="text/javascript">var Shop_BuyMode = '@Maticsoft.BLL.SysManage.ConfigSystem.GetValueByCache("Shop_BuyMode")';</script>
<link href="/Scripts/PhotoSwipe/photoswipe.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/PhotoSwipe/klass.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery/maticsoft.jquery.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery/maticsoft.img.min.js" type="text/javascript"></script>
<link href="/Areas/MShop/Themes/M1/Content/Css/productdetail.css" rel="stylesheet" type="text/css" />
<link href="/Scripts/jqueryui/base/jquery-ui-1.9.2.min.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/jqueryui/jquery-ui-1.9.2.custom.js" type="text/javascript"></script>
<script src="/Areas/MShop/Themes/M1/Content/Scripts/productdetailnew.js" type="text/javascript"></script>
<script src="/Areas/MShop/Themes/M1/Content/Scripts/SKUweixingroupby.js" type="text/javascript"></script>
<script src="/Scripts/PhotoSwipe/photoswipe.jquery.min.js" type="text/javascript"></script>
<link href="/Scripts/PhotoSwipe/styles.css" rel="stylesheet" type="text/css" />
<script src="/Areas/Shop/Themes/M1/Content/Scripts/timeCountDownHaoLi.js" type="text/javascript"></script>
<script src="/Areas/Shop/Themes/M1/Content/Scripts/jquery.tmpl.min.js" type="text/javascript"></script>

<style type="text/css">
    .seach_bg {
        background: #f2f2f2;
    }

    div.ps-document-overlay {
        /*background: #ede6db;*/
        background: white;
    }

    .Discount_we em, .Discount_we i {
        font-style: normal;
        display: inline-block;
        *display: inline;
        zoom: 1;
    }

    .Discount_we {
        float: left;
    }

        .Discount_we em {
            width: 4rem;
            height: 2rem;
            line-height: 2rem;
            text-align: center;
            background: #ff6900;
            color: #fff;
        }

        .Discount_we i {
            width: 4rem;
            height: 2rem;
            line-height: 2rem;
            text-align: center;
            background: #00b4ff;
            color: #fff;
        }

    .Discount_ys {
        float: right;
    }

        .Discount_ys em {
            font-style: normal;
            color: #5f5f5f;
        }

    .productshow_title, .productshow_jiage {
        background: #fff;
    }

    .productshow_jiage {
        margin-bottom: 20px;
    }

    .tariff_fl em {
        height: 35px;
        line-height: 35px;
        font-style: normal;
        padding-right: 15px;
    }

    .choiceOptions {
        width: 100%;
        background: #fff;
        overflow: hidden;
    }

    .productshow_sl span {
        float: left;
    }

    .productshow_a ul li.productsh_kmkl {
        border-bottom: 1px solid #ff6900;
    }

    .productshow_a {
        background: #fff;
        padding-bottom: 20px;
    }

    .HK_pp {
        padding: 0;
        width: 100%;
    }

    .sku-size-title {
        width: 3rem;
        text-align: right;
    }

    .HK_pp .colorOptions, .HK_pp .sizeOptions {
        padding-top: 10px;
    }

    .btn-tbl-cell em {
        width: 1.8rem;
        height: 1.8rem;
        margin: 0 auto;
        display: block;
    }

        .btn-tbl-cell em img {
            width: 100%;
            vertical-align: middle;
        }
</style>

<style type="text/css">
    body, button, dd, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, input, legend, li, ol, p, select, table, td, textarea, th, ul {
        margin: 0;
        padding: 0;
    }

    body {
        min-width: 320px;
        font-size: 14px;
        font-family: 'microsoft yahei',Verdana,Arial,Helvetica,sans-serif;
        color: #000;
        -webkit-text-size-adjust: none;
    }

    body {
        background-color: #f8f8f8;
    }

    fieldset, img {
        border: 0;
    }

    ol, ul {
        list-style: none;
    }

    address, em {
        font-style: normal;
    }

    a {
        color: #000;
        text-decoration: none;
    }

    table {
        border-collapse: collapse;
    }

    .clearfix:after {
        clear: both;
        content: " ";
        display: block;
        font-size: 0;
        height: 0;
        visibility: hidden;
    }

    .clearfix {
        zoom: 1;
    }

    .dis_tab {
        display: table;
        width: 100%;
    }

    .dis_tab_c {
        display: table-cell;
    }

    * {
        -webkit-tap-highlight-color: rgba(0,0,0,0);
    }

    #bd {
        width: 100%;
        min-width: 320px;
        margin: 0 auto;
    }

    .seckilling {
        padding: 0px 5px;
        margin-bottom: 5px;
    }

    .seckilling_box {
        background: #fff;
        box-shadow: 0 1px 2px rgba(0,0,0,.2);
        padding-top: 3px;
    }

        .seckilling_box .seckilling_title {
            height: 30px;
            line-height: 30px;
            padding-left: 10px;
        }

            .seckilling_box .seckilling_title span {
                float: left;
                display: block;
                height: 30px;
            }

            .seckilling_box .seckilling_title .s_t span, .seckilling_box .seckilling_title .s_d, .seckilling_box .seckilling_title .seckilling_bg {
                background-image: url(http://img30.ddimg.cn/upload_img/00363/touch/ques_1212d3.png);
                background-repeat: no-repeat;
                background-size: 81.5px 24.5px;
            }

            .seckilling_box .seckilling_title .seckilling_more {
                float: right;
                color: #646464;
                padding: 0 4px;
                font-size: 12px;
            }

            .seckilling_box .seckilling_title .seckilling_bg {
                width: 52px;
                background-position: left center;
                margin-right: 4px;
            }

            .seckilling_box .seckilling_title .s_t span {
                width: 10px;
                margin-right: 1px;
                background-position: -56px center;
                color: #fff;
                font-size: 12px;
                text-align: center;
                line-height: 29px;
            }

            .seckilling_box .seckilling_title .s_d {
                width: 5px;
                background-position: -78px center;
            }

        .seckilling_box li {
            float: left;
            width: 33%;
        }

            .seckilling_box li.line1 {
                margin-left: 0.5%;
            }

            .seckilling_box li a {
                padding: 0 5px;
                display: block;
            }

                .seckilling_box li a img {
                    display: block;
                    width: 100%;
                }

            .seckilling_box li .name {
                padding: 0 5px;
                font-size: 12px;
                height: 20px;
                line-height: 20px;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }

            .seckilling_box li .price {
                padding: 2px 0px 4px;
                color: #fb4551;
                font-size: 9px;
            }

                .seckilling_box li .price .rob {
                    font-size: 13px;
                }

                .seckilling_box li .price .price_r {
                    float: right;
                    color: #969696;
                    text-decoration: line-through;
                    font-size: 9px;
                    padding-top: 2px;
                }

    .touch_index_jdt {
        overflow: hidden;
        position: relative;
        margin: 0 auto;
    }

        .touch_index_jdt .tab_content_aa {
            width: 100%;
            position: relative;
            overflow: hidden;
        }

            .touch_index_jdt .tab_content_aa ul {
                width: 10000%;
                display: table;
            }

                .touch_index_jdt .tab_content_aa ul li {
                    float: left;
                    text-align: center;
                    display: table-cell;
                }

                    .touch_index_jdt .tab_content_aa ul li a, .touch_index_jdt .tab_content_aa ul li a img, .touch_index_jdt .tab_content_aa ul li img {
                        width: 100%;
                        height: auto;
                        display: block;
                    }

                        .touch_index_jdt .tab_content_aa ul li a img {
                            vertical-align: top;
                        }

        .touch_index_jdt .head {
            width: 320px;
            text-align: center;
            position: absolute;
            bottom: 6px;
            left: 50%;
            margin-left: -160px;
            vertical-align: middle;
            display: table;
        }

            .touch_index_jdt .head li {
                font-size: 0;
                line-height: 0;
                text-indent: -9999px;
                height: 6px;
                width: 6px;
                margin: 0 3px;
                display: inline-block;
                background-color: rgba(255,255,255,.5);
                border-radius: 2px;
                overflow: hidden;
            }

                .touch_index_jdt .head li.on {
                    background-color: #0cc4b8;
                }

    .notice_sec {
        padding-bottom: 6px;
        background: #fff url(http://img3.ddimg.cn/00363/touch/line_bg.png) center bottom repeat-x;
        font-size: 22px;
    }

    .notice {
        height: 1.6em;
        line-height: 1.6em;
        position: relative;
        overflow: hidden;
    }

        .notice a {
            display: block;
            color: #646464;
            font-size: 0.6em;
            padding-left: 1.9em;
        }

        .notice span {
            display: block;
            width: 0.87em;
            height: 0.6em;
            background: url(http://img3.ddimg.cn/00363/touch/touch_sprite.png) 0.15em 0.15em no-repeat;
            background-size: 3.75em 1.35em;
            position: absolute;
            left: 0.24em;
            top: 0.45em;
        }

    .user_apply {
        margin-bottom: 8px;
        font-size: 22px;
        background-color: #fff;
    }

        .user_apply ul li {
            float: left;
            width: 25%;
        }

            .user_apply ul li div {
                border-right: 1px solid #ededed;
                border-bottom: 1px solid #dcdcdc;
                text-align: center;
            }

            .user_apply ul li:last-child div {
                border-right: 0;
            }

            .user_apply ul li div a {
                display: block;
                padding: 0.4em;
            }

                .user_apply ul li div a .icon {
                    display: inline-block;
                    width: 1em;
                    height: 1em;
                    background: url(http://img3.ddimg.cn/00363/touch/touch_sprite.png) no-repeat;
                    background-size: 6.25em 2.25em;
                }

                .user_apply ul li div a .icon1 {
                    background-position: -1.37em 0;
                }

                .user_apply ul li div a .icon2 {
                    background-position: -2.65em 0;
                }

                .user_apply ul li div a .icon3 {
                    background-position: -3.85em 0;
                }

                .user_apply ul li div a .icon4 {
                    background-position: -5.4em 0;
                }

                .user_apply ul li div a .text {
                    display: block;
                    font-size: 0.6em;
                    text-align: center;
                    color: #778087;
                }



    .vip_box {
        width: 100%;
        margin: 0 auto;
        border-top: 1px solid #dcdcdc;
        margin-bottom: 8px;
        background-color: #fff;
    }

        .vip_box a, .vip_box img {
            display: block;
            width: 100%;
        }

        .vip_box .vip_box1 {
            border-bottom: 1px solid #dcdcdc;
        }

        .vip_box .vip_box1_l {
            float: left;
            width: 33.33333%;
        }

            .vip_box .vip_box1_l li div {
                border-right: 1px solid #dcdcdc;
            }

            .vip_box .vip_box1_l li:first-child div {
                border-bottom: 1px solid #dcdcdc;
            }

        .vip_box .vip_box1_r {
            float: left;
            width: 66.66666%;
        }

            .vip_box .vip_box1_r li {
                float: left;
                width: 50%;
            }

                .vip_box .vip_box1_r li div {
                    border-right: 1px solid #dcdcdc;
                    border-bottom: 1px solid #dcdcdc;
                }

                .vip_box .vip_box1_r li:nth-of-type(even) div {
                    border-right-color: #fff;
                }

                .vip_box .vip_box1_r li:nth-child(5n+3) div {
                    border-bottom: 0;
                }

                .vip_box .vip_box1_r li:nth-child(5n+4) div {
                    border-bottom: 0;
                }

        .vip_box .vip_box2 li {
            float: left;
            width: 33.33333%;
        }

            .vip_box .vip_box2 li div {
                border-right: 1px solid #dcdcdc;
                border-bottom: 1px solid #dcdcdc;
            }

            .vip_box .vip_box2 li:nth-child(3n+3) div {
                border-right-color: #fff;
            }

    .guan_list {
        margin-bottom: 10px;
        border-bottom: 1px solid #dcdcdc;
        background-color: #fff;
    }

        .guan_list ul li {
            float: left;
            width: 50%;
        }

            .guan_list ul li div {
                border-left: 1px solid #dcdcdc;
                border-top: 1px solid #dcdcdc;
            }

            .guan_list ul li a, .guan_list ul li img {
                display: block;
                width: 100%;
            }

    .new_box {
        width: 100%;
        background: #fff;
        margin-bottom: 8px;
    }

        .new_box .new_box_pic {
            border: 1px solid #dcdcdc;
            border-width: 1px 0;
        }

            .new_box .new_box_pic li {
                float: left;
                width: 33%;
            }

                .new_box .new_box_pic li div {
                    border-right: 1px solid #fff;
                }

                .new_box .new_box_pic li a, .new_box .new_box_pic li img {
                    display: block;
                    width: 100%;
                }

                .new_box .new_box_pic li.clearfix_li_0 {
                    width: 66%;
                    margin-left: 0.5%;
                }

                    .new_box .new_box_pic li.clearfix_li_0 div {
                        border-right: 1px solid #dcdcdc;
                        border-left: 1px solid #fff;
                    }

                .new_box .new_box_pic li.clearfix_li_1 div {
                    border-bottom: 1px solid #dcdcdc;
                }

        .new_box .new_box_pn {
            border-bottom: 1px solid #dcdcdc;
        }

            .new_box .new_box_pn li {
                float: left;
                width: 33%;
            }

                .new_box .new_box_pn li.line1 {
                    margin-left: 0.5%;
                }

                .new_box .new_box_pn li div {
                    border-right: 1px solid #dcdcdc;
                }

                .new_box .new_box_pn li:last-child div {
                    border-right: 1px solid #fff;
                }

                .new_box .new_box_pn li a, .new_box .new_box_pn li a img {
                    display: block;
                    width: 100%;
                }

                .new_box .new_box_pn li .name {
                    padding: 0 5px;
                    font-size: 12px;
                    height: 20px;
                    line-height: 20px;
                    white-space: nowrap;
                    text-overflow: ellipsis;
                    overflow: hidden;
                }

                .new_box .new_box_pn li .price {
                    padding: 0 6px 5px;
                    color: #fc4f1f;
                    font-size: 9px;
                }

                    .new_box .new_box_pn li .price .price_r {
                        float: right;
                        color: #969696;
                        text-decoration: line-through;
                    }

    .zhutgtitle .zhutgtitle {
        line-height: 39px;
        padding-left: 10px;
        font-weight: normal;
        font-size: 18px;
        border-top: 1px solid #dcdcdc;
        background: #fff;
    }
</style>

<style type="text/css">
    div.ps-document-overlay {
        background: white;
    }
</style>


<script type="text/javascript">
    (function (window, $, PhotoSwipe) {
        $(document).ready(function () {
            var delay = 3000;
            var autoStartSlideshow = true;
            var instance, indicators;
            indicators = $("#Indicators img");
            if (indicators.length < 1) return;
            instance = PhotoSwipe.attach(
            indicators,
                {
                    target: $("#PhotoDetail"),
                    preventHide: true,
                    autoStartSlideshow: autoStartSlideshow,
                    preventDefaultTouchEvents: false,
                    allowUserZoom: false,
                    captionAndToolbarHide: true,
                    slideshowDelay: delay,
                    getImageSource: function (obj) {
                        return $(obj).attr("src");
                    },
                    getImageCaption: function (obj) {
                        return $(obj).attr("alt");
                    },
                    getImageMetaData: function (el) {

                        return {
                            longDescription: el.getAttribute('alt'),
                            relatedUrl: el.getAttribute('href')
                        };
                    }
                }
            );
            instance.addEventHandler(PhotoSwipe.EventTypes.onDisplayImage, function (e) {
                $(e.currentTarget.originalImages).parent().removeClass();
                $(e.currentTarget.originalImages[e.index]).parent().addClass('current');
            });
            instance.addEventHandler(PhotoSwipe.EventTypes.onTouch, function (e) {
                if (e.action === 'tap') {
                    var relatedUrl = this.getCurrentImage().metaData.relatedUrl;
                    if (relatedUrl && relatedUrl != 'http://') window.open(relatedUrl);
                }
            });
            instance.show(0);
        });
    }(window, window.jQuery, window.Code.PhotoSwipe));
</script>

<script id="sencondTemplate" type="text/x-jquery-tmpl">
    ${title}: <span style="color: red"><span id="dayEnd">${day}</span>天<span id="hourEnd">${hour}</span>时 
         <span id="minEnd">${minute}</span>分 <span id="secEnd">${second}</span>秒
    </span>
</script>

<div class="top">
    <a href="javascript:;" onclick="history.go(-1)"><span>&lt;返回</span></a>
    @Html.Partial("/Areas/MShop/Themes/M1/Views/Partial/_HeadRight.cshtml")
</div>

@if (Model != null)
{
    <div id="iteminfo" data-role="page" data-add-back-btn="true">
        <input type="hidden" id="hidimg" value="@Maticsoft.Web.Components.FileHelper.GeThumbImage(Model.ProductInfo.ThumbnailUrl1, "T115X115_")" />
        <input type="hidden" id="hidproductname" value="@Model.ProductInfo.ProductName" />
        <input type="hidden" id="hidprice" value="@WeiXinGroupBuyinfo.Price" />
        <input type="hidden" id="hidactivetype" value="@ViewBag.ActiveType" />
        <input type="hidden" id="hidactiveid" value="@WeiXinGroupBuyinfo.GroupBuyId" />



        @*<div class="index-ads w">
            <div id="PhotoDetail" style="margin-top: 2px">
            </div>
            @if (Model != null && Model.ProductImages != null)
            {
                <div id="Indicators" style="margin-top: 0px">
                    @foreach (ProductImage productImage in Model.ProductImages)
                    {
                        <img style="display: none"   src="@Maticsoft.Web.Components.FileHelper.GeThumbImage(productImage.ThumbnailUrl1, "T350X350_")"   alt="@Model.ProductInfo.ProductName" />
                    }
                </div> 
            }
        </div>*@
        <div class="touch_index_jdt" id="component_map_id_898061_part_id_6580" name="m898061_pid0_p6580" dd_name="焦点图区" js="true" itemclass="" action="hover" delay="0" speed="5000" rand="0" area="0" barclass="on" updown="1" level="2">
            <div class="tab_content_aa" id="scroller" ontouchstart="touchStart(event)" ontouchmove="touchMove(event)" ontouchend="touchEnd(event)" style="overflow: hidden;">
                <ul id="scroller_ul" style="width: 700%; position: relative; left: -5586px;">
                    @if (Model != null && Model.ProductImages != null)
                    {
                        int i = 0;
                        foreach (ProductImage productImage in Model.ProductImages)
                        {
                            i = i + 1;
                        <li class="content tab_@(i)" type="item" style="width: 14.285714285714286%;">
                            <a name="jiaodian-pic@(i)" class=" _1  pic" href="javascript:;" title="" nname="h5-108966-12752_1-698356_1">
                                <img   src="@Maticsoft.Web.Components.FileHelper.GeThumbImage(productImage.ThumbnailUrl1, "T350X350_")"   alt="@Model.ProductInfo.ProductName" />
                            </a>
                        </li>
                        }
                    }
                </ul>
            </div>
            <div class="head">
                <ul class="tab_aa" id="img_mornitor">
                    @if (Model != null && Model.ProductImages != null)
                    {
                        foreach (ProductImage productImage in Model.ProductImages)
                        { 
                        <li class=""></li>
                        }
                    }
                </ul>
            </div>
        </div>







        <div class="productshow_title">
            @Model.ProductInfo.ProductName
        </div>
        <span style="color: red">
            <p style="text-align:center; padding:10px 0;" id="productDate" startDate="@GroupBuyInfo.StartDate"  endDate="@GroupBuyInfo.EndDate" class="txtenddate" curDate="@DateTime.Now" product="@Model.ProductInfo.ProductId">
            </p>
        </span>
        <div class="productshow_jiage ">
            <div class="tariff_fl">
                <em>抢购价：<strong>￥<span id="stylePrice">@((ViewBag.ActiveType != 0 && WeiXinGroupBuyinfo.Price != 0) ? WeiXinGroupBuyinfo.Price.ToString("F") : Model.ProductSkus[0].SalePrice.ToString("F"))</span></strong></em>
                <em>市场价：<span>￥@(Model.ProductInfo.MarketPrice.HasValue ? Model.ProductInfo.MarketPrice.Value.ToString("F") : "0")</span></em>
            </div>
            <div class="" style="overflow: hidden;">
                <div class="Discount_we">
                    <em>@(Model.ProductInfo.MarketPrice.HasValue ? (price / Model.ProductInfo.MarketPrice.Value * 10).ToString("0.0") + "折" : "折")</em>
                    <i>包邮</i>
                </div>
                <div class="Discount_ys">已售<em>@(GroupBuyInfo.GroupBase + GroupBuyInfo.BuyCount)件</em></div>
            </div>
        </div>
        <div class="proshow_pl">
        </div>
        <div class="choiceOptions c6">
            <div id="SKUOptions" class="proshowlxtext  HK_pp" style="float: left">
                @Html.Action("OptionSKU", "Product", new { ProductId = Model.ProductInfo.ProductId, viewName = "_OptionSKU" })
            </div>
            <div class="productshow_sl">
                <span>购买件数：</span>
                <a href="javascript:;" class="redu" id="subtract">-</a>
                <input type="text" size="4" value="1" name="num" id="productCount" style="border: 1px solid #EAEAEA; text-align: center; /*margin-right: 2px; */ width: 25px; height: 23px; line-height: 23px;" />
                <a href="javascript:;" id="plus" class="add">+</a> <span style="display: none">（库存@(Model.ProductSkus[0].Stock)件）</span>
            </div>
        </div>
        <div class="producshow_but">
            <div class="btn-section">
                <span class="btn-tbl-cell">
                    <a class="link" productId="@Model.ProductInfo.ProductId" id="btnProductFav">
                        <em style="">
                            <img src="/Areas/MShop/Themes/M1/Content/img/ty.png" />
                        </em>
                    </a>
                </span>
                @if (WeiXinGroupBuyinfo.BuyCount >= WeiXinGroupBuyinfo.MaxCount)
                {
                    <span class="btn-tbl-cell">
                        <a class="btn-add-cart link" defaulttext="抢购已售罄" style="background-color: #5f5f5f; border: 0px">抢购已售罄
                        </a>
                    </span>
                    <span class="btn-tbl-cell">
                        <a class="btn-quk-buy" defaulttext="抢购已售罄" style="background-color: #5f5f5f; border: 0px">抢购已售罄
                        </a>
                    </span>
                }
                else
                { 
                    <span class="btn-tbl-cell" style="display: none">
                        <a class="btn-add-cart link" id="btnAddToCart" DefaultText='@(Maticsoft.BLL.SysManage.ConfigSystem.GetValueByCache("Shop_BuyMode") == "BuyNow" ? "立刻购买" : "放入购物车")'   itemid=""  productid="@Model.ProductInfo.ProductId">
                            @(Maticsoft.BLL.SysManage.ConfigSystem.GetValueByCache("Shop_BuyMode") == "BuyNow" ? "立刻购买" : "放入购物车")
                        </a>
                    </span>
                    <span class="btn-tbl-cell" style="">
                        <a class="btn-quk-buy" id="btnQukBuy"   itemid=""  productid="@Model.ProductInfo.ProductId" DefaultText="立刻购买">立刻购买
                        </a>
                    </span>
                }

            </div>
        </div>
        <div class="productshow_a">
            <ul>
                <li class="productsh_kmkl"><a href="@(ViewBag.BasePath)product/productdesc/@Model.ProductInfo.ProductId">商品详情</a></li>
                <li style=""><a href="@(ViewBag.BasePath)product/Attr/@Model.ProductInfo.ProductId">规格参数</a></li>
            </ul>
        </div>
    </div>
}
<script type="text/javascript">
    var imgUrlVal = $("#hidimg").val();
    var desc = "健康商城-您身边的商城（zhenhaolin.com）-贴心服务、优惠返利、保险赠送、轻松购物,网上商城，批发商城，分销商城，电子商务解决方案";
    var title = $("#hidproductname").val();
</script>

<script type="text/javascript">
    var iscanbuy = false;
    var issaleempty = false;
    var tmplObj = $('#sencondTemplate');
    function render(data, productId) {
        $(".txtenddate").empty();
        if (issaleempty) {
            $('#btnAddToCart').removeClass('addCart').addClass('addCart-gray');
            $('#btnAddToCart').attr('disabled', 'disabled').addClass('addCart-gray');

            $('#btnQukBuy').removeClass('addCart').addClass('addCart-gray');
            $('#btnQukBuy').attr('disabled', 'disabled').addClass('addCart-gray');

            $(this).html("抢购已售罄");
            iscanbuy = false;
            return;
        }
        //按钮颜色
        //结束后执行该指令
        if (data.status == -1) {

            $('#btnAddToCart').removeClass('addCart').addClass('addCart-gray');

            $('#btnAddToCart').attr('disabled', 'disabled').addClass('addCart-gray');

            $('#btnQukBuy').removeClass('addCart').addClass('addCart-gray');
            $('#btnQukBuy').attr('disabled', 'disabled').addClass('addCart-gray');


            $("#btnAddToCart").html("抢购结束");
            $("#btnQukBuy").html("抢购结束");
            iscanbuy = false;
        }
        if (data.status == 0) {
            data.title = "准备开抢";
            $('#btnAddToCart').removeClass('addCart').addClass('addCart-gray');
            $('#btnAddToCart').attr('disabled', 'disabled').addClass('addCart-gray');

            $('#btnQukBuy').removeClass('addCart').addClass('addCart-gray');
            $('#btnQukBuy').attr('disabled', 'disabled').addClass('addCart-gray');

            $("#btnAddToCart").html("即将开始");
            $("#btnQukBuy").html("即将开始");

            iscanbuy = false;
        }
        if (data.status == 1) {
            //还剩多少时间结束
            $('#btnAddToCart').removeClass('addCart-gray').addClass('addCart');
            $("#btnAddToCart").attr("disable", "false");

            $('#btnQukBuy').removeClass('addCart-gray').addClass('addCart');
            $("#btnQukBuy").attr("disable", "false");

            iscanbuy = true;
        }
        //购买按钮禁用
        return tmplObj.tmpl(data);
    }
    //产生秒表
    function ProSecond() {
        $(".txtenddate").each(function () {
            var curDate = $(this).attr("curDate");
            var startDate = $(this).attr("startDate");
            var endDate = $(this).attr("endDate");
            var productId = $(this).attr("product");
            // alert(curDate + "======" + startDate + "======" + endDate + "======" + productId);
            var myclass = new CountDown();
            thisObj = $(this);
            myclass.init({
                thisObj: thisObj,
                productId: productId,
                renderCallback: render,
                serverTime: curDate,
                startTime: startDate,
                endTime: endDate
            });
        })
    }
    $(function () {
        ProSecond();
    });
</script>

<script type="text/javascript">
    $('.touch_index_jdt .tab_content_aa').attr({ 'id': 'scroller', 'ontouchstart': "touchStart(event)", 'ontouchmove': 'touchMove(event)', 'ontouchend': 'touchEnd(event)' });
    $('.touch_index_jdt .tab_content_aa ul').attr({ 'id': 'scroller_ul' });
    $('.touch_index_jdt .head ul').attr({ 'id': 'img_mornitor' });
    $('.touch_index_jdt .head ul li').remove();
    function createPicMove(a, b, c) {
        var g = function (j) {
            return "string" == typeof j ? document.getElementById(j) : j
        };
        var d = function (j, l) {
            for (var k in l) {
                j[k] = l[k]
            }
            return j
        };
        var f = function (j) {
            return j.currentStyle || document.defaultView.getComputedStyle(j, null)
        };
        var i = function (l, j) {
            var k = Array.prototype.slice.call(arguments).slice(2);
            return function () {
                return j.apply(l, k.concat(Array.prototype.slice.call(arguments)))
            }
        };
        var e = {
            Quart: {
                easeOut: function (k, j, m, l) {
                    return -m * ((k = k / l - 1) * k * k * k - 1) + j
                }
            }, Back: {
                easeOut: function (k, j, n, m, l) {
                    if (l == undefined) {
                        l = 1.70158
                    }
                    return n * ((k = k / m - 1) * k * ((l + 1) * k + l) + 1) + j
                }
            }, Bounce: {
                easeOut: function (k, j, m, l) {
                    if ((k /= l) < (1 / 2.75)) {
                        return m * (7.5625 * k * k) + j
                    } else {
                        if (k < (2 / 2.75)) {
                            return m * (7.5625 * (k -= (1.5 / 2.75)) * k + 0.75) + j
                        } else {
                            if (k < (2.5 / 2.75)) {
                                return m * (7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375) + j
                            } else {
                                return m * (7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375) + j
                            }
                        }
                    }
                }
            }
        };
        var h = function (k, n, m, l) {
            this._slider = g(n);
            this._container = g(k);
            this._timer = null;
            this._count = Math.abs(m);
            this._target = 0;
            this._t = this._b = this._c = 0;
            this.Index = 0;
            this.SetOptions(l);
            this.Auto = !!this.options.Auto;
            this.Duration = Math.abs(this.options.Duration);
            this.Time = Math.abs(this.options.Time);
            this.Pause = Math.abs(this.options.Pause);
            this.Tween = this.options.Tween;
            this.onStart = this.options.onStart;
            this.onFinish = this.options.onFinish;
            var j = !!this.options.Vertical;
            this._css = j ? "top" : "left";
            var o = f(this._container).position;
            o == "relative" || o == "absolute" || (this._container.style.position = "relative");
            this._container.style.overflow = "hidden";
            this._slider.style.position = "absolute";
            this.Change = this.options.Change ? this.options.Change : this._slider[j ? "offsetHeight" : "offsetWidth"] / this._count
        };
        h.prototype = {
            SetOptions: function (j) {
                this.options = {
                    Vertical: true, Auto: true, Change: 0, Duration: 50, Time: 10, Pause: 4000, onStart: function () {
                    }, onFinish: function () {
                    }, Tween: e.Quart.easeOut
                };
                d(this.options, j || {})
            }, Run: function (j) {
                j == undefined && (j = this.Index);
                j < 0 && (j = this._count - 1) || j >= this._count && (j = 0);
                this._target = -Math.abs(this.Change) * (this.Index = j);
                this._t = 0;
                this._b = parseInt(f(this._slider)[this.options.Vertical ? "top" : "left"]);
                this._c = this._target - this._b;
                this.onStart();
                this.Move()
            }, Move: function () {
                clearTimeout(this._timer);
                if (this._c && this._t < this.Duration) {
                    this.MoveTo(Math.round(this.Tween(this._t++, this._b, this._c, this.Duration)));
                    this._timer = setTimeout(i(this, this.Move), this.Time)
                } else {
                    this.MoveTo(this._target);
                    this.Auto && (this._timer = setTimeout(i(this, this.Next), this.Pause))
                }
            }, MoveTo: function (j) {
                this._slider.style[this._css] = j + "px"
            }, Next: function () {
                this.Run(++this.Index)
            }, Previous: function () {
                this.Run(--this.Index)
            }, Stop: function () {
                clearTimeout(this._timer);
                this.MoveTo(this._target)
            }
        };
        return new h(a, b, c, { Vertical: false })
    }

    // 轮播图片个数
    var pic_num = $("#scroller_ul li").length;
    $("#scroller_ul").css("width", (pic_num * 100 + '%'));

    var st = createPicMove("scroller", "scroller_ul", pic_num);
    // 插入数字
    var forEach = function (array, callback) {
        for (var i = 0, len = array.length; i < len; i++) { callback.call(this, array[i], i); }
    }
    var nums = [];
    for (var i = 0, n = st._count - 1; i <= n; i++) {
        var li = document.createElement("li");
        nums[i] = document.getElementById("img_mornitor").appendChild(li);
    }
    // 设置按钮样式
    st.onStart = function () {
        //forEach(nums, function(o, i){ o.className = ""})
        forEach(nums, function (o, i) { o.className = st.Index == i ? "on" : ""; })
    }
    // 重新设置浮动
    $("#scroller_ul").css("position", "relative");

    var _initX = 0;
    var _finishX = 0;
    var _startX = 0;
    var _startY = 0;
    function touchStart(event) {
        _startX = event.touches[0].clientX;
        _startY = event.touches[0].clientY;
        _initX = _startX;
    }
    function touchMove(event) {
        var touches = event.touches;
        var _endX = event.touches[0].clientX;
        var _endY = event.touches[0].clientY;
        if (Math.abs(_endY - _startY) > Math.abs(_endX - _startX)) {
            return;
        }
        event.preventDefault();
        _finishX = _endX;
        var _absX = Math.abs(_endX - _startX);
        var lastX = $('#scroller_ul').css('left').replace('px', '');
        if (_startX > _endX) {
            st.Stop();
            $('#scroller_ul').css('left', (parseInt(lastX) - _absX) + 'px');
        } else {
            st.Stop();
            $('#scroller_ul').css('left', (parseInt(lastX) + _absX) + 'px');
        }
        _startX = _endX;
    }
    //触屏  离开屏幕事件
    function touchEnd(event) {
        if (_finishX == 0) {
            return;
        }
        if (_initX > _finishX) {
            bindEvent(_initX, _finishX);
        } else if (_initX < _finishX) {
            bindEvent(_initX, _finishX);
        }
        _initX = 0;
        _finishX = 0;
    }


    // 绑定触屏触发事件
    //param start
    // param end

    function bindEvent(start, end) {
        if (start >= end) {
            st.Next();
        } else {
            st.Previous();
        }
    }
    st.Run();
    var resetScrollEle = function () {
        var slider2Li = $("#scroller_ul li");
        slider2Li.css("width", 100 / pic_num + "%");
    }
    resetScrollEle();
</script>
